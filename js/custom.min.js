/*! npm-geonet-api 2021-08-08 */

var myKey=JSON.parse(myKey),key=myKey[0].key,searchBtn=document.querySelector("#searchBtn"),newsContainer=document.querySelector(".container"),aboutContainer=document.querySelector(".abt-section"),abtLink=document.querySelector(".abt-link"),countrySelect=document.querySelector("#country"),categorySelect=document.querySelector("#category"),queryUrl="https://content.guardianapis.com/search?show-fields=headline,trailText,thumbnail,byline&show-elements=all&api-key="+key;function updateDom(){for(;newsContainer.firstChild;)newsContainer.removeChild(newsContainer.lastChild);$.ajax({url:queryUrl,type:"GET",data:"json",success:function(e){for(var t=0;t<e.response.results.length;t++)document.querySelector(".container").innerHTML+='<div class="col-lg-4 col-md-6 col-sm-12"><div class="card"><div class="card-body"><img src="'+e.response.results[t].fields.thumbnail+'" style="width:100%;"><h5 class="card-title" style="padding-top:20px;">'+e.response.results[t].fields.headline+'</h5><p class="card-text">'+e.response.results[t].fields.trailText+'</p><p class="card-text bg" style="text-align:right;  font-style: italic;">'+e.response.results[t].fields.byline+'</p><a href="'+e.response.results[t].webUrl+'" class="stretched-link" target="_blank"></a></div></div></div>'},error:function(){alert("error")}})}function updateSearch(){for(var e=document.querySelector(".search-bar").value,t=document.querySelector("#country").value,s=document.querySelector("#category").value;aboutContainer.firstChild;)aboutContainer.removeChild(aboutContainer.lastChild);queryUrl="https://content.guardianapis.com/search?show-fields=headline,trailText,thumbnail,byline&show-elements=all&q="+(e||"")+(t?","+t:"")+(s?","+s:"")+"&api-key="+key,updateDom()}$.ajax({url:queryUrl,type:"GET",data:"json",success:function(e){for(var t=0;t<e.response.results.length;t++)document.querySelector(".container").innerHTML+='<div class="col-lg-4 col-md-6 col-sm-12"><div class="card"><div class="card-body"><img src="'+e.response.results[t].fields.thumbnail+'" style="width:100%;"><h5 class="card-title" style="padding-top:20px;">'+e.response.results[t].fields.headline+'</h5><p class="card-text">'+e.response.results[t].fields.trailText+'</p><p class="card-text bg" style="text-align:right;  font-style: italic;">'+e.response.results[t].fields.byline+'</p><a href="'+e.response.results[t].webUrl+'" class="stretched-link" target="_blank"></a></div></div></div>'},error:function(){alert("error")}}),searchBtn.addEventListener("click",updateSearch,!1),countrySelect.addEventListener("change",updateSearch,!1),categorySelect.addEventListener("change",updateSearch,!1),abtLink.addEventListener("click",()=>{for(;newsContainer.firstChild;)newsContainer.removeChild(newsContainer.lastChild);aboutContainer.innerHTML+='<div class="about-me row d-flex justify-content-center"><div class="card"><div class="card-body"><div class="row"><div class="col-lg-5 col-sm-12"><img src="img/the-dev.jpg" class="about-img" alt="Photo of myself"></div><div class="col-lg-7 col-sm-12"><h3 class="card-title">About Me</h3><p class="card-text">Hi, I\'m Mo, the dev behind this little project. I\'m a Web UX Student at Yoobee Colleges in Wellington, raised in the mountains of New Zealand\'s South Island. I like learning, cats and rainy days viewed from indoors. This project was a formative for module 3 of my course that involved getting requests from a News API- The Guardian, for this project in particular. It filters the most relevant results based on your search terms and/or filters. Due to the nature of the free API, results won\'t always be extremely relevant depending on your search and combination of filters, however it does its best to pick out the closest stories!</p></div></div></div></div></div>'},!1);